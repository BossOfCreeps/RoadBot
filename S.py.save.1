from socket import *
import threading
from time import sleep
side="S"

def clock(interval):
    host = '10.0.0.14'
    port = 8888
    addr = (host,port)

    tcp_socket = socket(AF_INET, SOCK_STREAM)
    tcp_socket.bind(addr)
    tcp_socket.listen(1)

    conn, addr = tcp_socket.accept()    
    while True:
        data = conn.recv(1024)
        print(data)
        global side
        side = data
        tcp_socket.close()

t = threading.Thread(target=clock, args=(15,))
t.daemon = True
t.start()

while True:
    if (side=="F"):
        IN1=40
        IN2=38
        IN3=36
        IN4=32
IN5=37
IN6=35
IN7=33
IN8=31
EN0=29

GPIO.setmode(GPIO.BOARD)
GPIO.setup(IN1, GPIO.OUT)
GPIO.setup(IN2, GPIO.OUT)
GPIO.setup(IN3, GPIO.OUT)
GPIO.setup(IN4, GPIO.OUT)
GPIO.setup(IN5, GPIO.OUT)
GPIO.setup(IN6, GPIO.OUT)
GPIO.setup(IN7, GPIO.OUT)
GPIO.setup(IN8, GPIO.OUT)
GPIO.setup(EN0, GPIO.OUT)
speed=GPIO.PWM(EN0,100)
speed.start(75)
GPIO.output(IN1, GPIO.LOW)
GPIO.output(IN2, GPIO.HIGH)
GPIO.output(IN3, GPIO.LOW)
GPIO.output(IN4, GPIO.HIGH)
GPIO.output(IN5, GPIO.LOW)
GPIO.output(IN6, GPIO.HIGH)
GPIO.output(IN7, GPIO.LOW)
GPIO.output(IN8, GPIO.HIGH)
     
